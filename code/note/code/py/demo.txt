CREATE TABLE `doomtown_data` (
  `id` bigint AUTO_INCREMENT COMMENT '自增id',
  `event_name` varchar COMMENT '预定义或自定义事件名称',
  `app_id` varchar COMMENT 'App的唯一标识 ',
  `app_channel_id` varchar COMMENT '包体外发渠道ID (GoolgePlay=gp  Apple AppStore =apple)',
  `app_version` varchar COMMENT 'APP 的应用版本（包体内置版本号 versionname  ）',
  `app_game_version` varchar COMMENT '应用游戏版本号 ',
  `app_res_version` varchar COMMENT '应用资源版本号',
  `app_install_id` varchar COMMENT '应用安装后第一次启动随机生成 随机取值范围[10000000,99999999]  缓存在磁盘中',
  `app_activate_id` varchar COMMENT '应用每次冷启动启动随机生成 随机取值范围[10000000,99999999] int  缓存在内存中',
  `device_id` varchar COMMENT '应用用于标识设备的唯一ID',
  `ad_id` varchar COMMENT '广告ID:Android=google adid  IOS=idfa',
  `androidid` varchar COMMENT 'ANDROIDID',
  `idfv` varchar COMMENT 'IOS-idfv',
  `os_type` varchar COMMENT '操作系统类型 （android/ios/macos/windows/...）',
  `os_version` varchar COMMENT '操作系统版本号',
  `app_lang` varchar COMMENT '游戏语言',
  `os_timezone_offset` varchar COMMENT '设备系统的时区偏移，相对于标准时区',
  `os_timestamp` bigint COMMENT '设备系统当前时间戳（秒级）',
  `device_network_type` int COMMENT '事件触发时的网络类型  未知=0 wifi=1 蜂窝网络2G=2  蜂窝网络3G=3 蜂窝网络4G=4 蜂窝网络5G=5',
  `app_user_id` varchar COMMENT '应用中用户ID',
  `stime` timestamp COMMENT '服务器接收时间',
  `user_ip` varchar COMMENT '用户IP地址',
  `country_id` varchar COMMENT '国家id',
  `analysis_date` date COMMENT '分析日期',
  `analysis_hour` varchar COMMENT '分析小时',
  `properties` varchar COMMENT '可变参数json',
  PRIMARY KEY (`analysis_date`,`id`,`app_user_id`)
) DISTRIBUTE BY HASH(`app_user_id`) PARTITION BY VALUE(`DATE_FORMAT(analysis_date, '%Y%m')`) LIFECYCLE 60 INDEX_ALL='Y' STORAGE_POLICY='COLD' ENGINE='XUANWU' TABLE_PROPERTIES='{"format":"columnstore"}' COMMENT='数据日志二级分区';
CREATE TABLE `escape_user_read_book` (
  `uuid` varchar COMMENT '用户ID',
  `book_id` varchar COMMENT '书籍ID',
  `chapter_id` varchar COMMENT '章节ID，其中 read 阅读书籍  finish 完成书籍阅读',
  `story_type` tinyint COMMENT '1 视觉小说，2 短信小说',
  `country_id` int COMMENT '国家ID',
  `user_ip` varchar COMMENT '用户IP地址',
  `analysis_date` date COMMENT '上报日期',
  `ctime` bigint,
  `stime` timestamp COMMENT '入库时间',
  PRIMARY KEY (`uuid`,`book_id`,`chapter_id`)
) DISTRIBUTE BY HASH(`uuid`) INDEX_ALL='Y' STORAGE_POLICY='HOT' ENGINE='XUANWU' TABLE_PROPERTIES='{"format":"columnstore"}' COMMENT='用户书籍阅读进度表';
